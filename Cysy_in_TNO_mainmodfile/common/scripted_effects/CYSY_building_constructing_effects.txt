monthly_CYSY_building_constructing = {
	do_CYSY_building_constructing = yes
	check_CYSY_building_constructing = yes
	update_CYSY_building_constructing_completed_left = yes
	update_stability_status = yes
}

# CYSY_building_constructing_data_completed 已经完成的工作量
# CYSY_building_constructing_data_speed 每月速度
# CYSY_building_constructing_completed_left 剩余的月数（四舍五入）
do_CYSY_building_constructing = {
	add_to_variable = { CYSY_building_constructing_data_completed = CYSY_building_constructing_data_speed }
}

update_CYSY_building_constructing_completed_left = {
	set_variable = { CYSY_building_constructing_in_left = 100 }
	subtract_from_variable= { CYSY_building_constructing_in_left = CYSY_building_constructing_data_completed }

	set_variable = {CYSY_building_constructing_completed_left = CYSY_building_constructing_in_left}
	divide_variable = {CYSY_building_constructing_completed_left = CYSY_building_constructing_data_speed}

	round_variable = CYSY_building_constructing_completed_left # （四舍五入）
}
check_CYSY_building_constructing = {
	if = {
		limit = {
			OR={
				check_variable = { CYSY_building_constructing_data_completed > 100 }
				check_variable = { CYSY_building_constructing_data_completed = 100 }
			}
		}
		complete_now_CYSY_building_constructing = yes
	}
}

complete_now_CYSY_building_constructing = {
	if = {
		limit = {
			has_country_flag = CYSY_XXX_building
		}
		clr_country_flag = CYSY_XXX_building
		set_variable = {CYSY_building_constructing_data_speed = 0}
		set_variable = {CYSY_building_constructing_completed_left = 0}
		set_variable = {CYSY_building_constructing_data_completed = 0}
	}

	else_if = {
		limit = {
			has_country_flag = CYSY_senior_east_building
		}
		clr_country_flag = CYSY_senior_east_building
		set_variable = {CYSY_building_constructing_data_speed = 0}
		set_variable = {CYSY_building_constructing_completed_left = 0}
		set_variable = {CYSY_building_constructing_data_completed = 0}
		country_event = { id = cysyxx.1001 }
	}
}